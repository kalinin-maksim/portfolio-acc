<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="acc_create_current_account_table"
               author="---">

        <createTable tableName="${prefix}cam_account">
            <column name="id"
                    type="${uuid_type}"
                    remarks="Unique ID generated by the system">
                <constraints primaryKeyName="pk_cum_account_id"
                             primaryKey="true"
                             nullable="false"/>
            </column>
            <column name="account_number" type="varchar(32)"/>
            <column name="customer_id" type="varchar(32)"/>
            <column name="flexcube_customer_id" type="varchar(32)"/>
            <column name="customer_name" type="varchar(17)"/>
            <column name="account_class" type="varchar(4)"/>
            <column name="branch_id" type="varchar(3)"/>
            <column name="account_type_id" type="varchar(32)"/>
            <column name="currency_id" type="varchar(3)"/>
            <column name="account_descr" type="varchar(255)"/>
            <column name="opening_date" type="date"/>
            <column name="account_status" type="varchar(32)"/>
        </createTable>

    </changeSet>

    <changeSet id="acc_add_foreign_key_constraint_account_type"
               author="---">
        <addForeignKeyConstraint baseTableName="${prefix}cam_account" baseColumnNames="account_type_id"
                                 referencedTableName="${prefix}account_type" referencedColumnNames="id"
                                 constraintName="fk_cam_account_account_type_id__account_type_id"/>
    </changeSet>

    <changeSet id="acc_add_foreign_key_constraint_currency"
               author="---">
        <addForeignKeyConstraint baseTableName="${prefix}cam_account" baseColumnNames="currency_id"
                                 referencedTableName="${prefix}currency" referencedColumnNames="id"
                                 constraintName="fk_cam_account_currency_id__currency_id"/>
    </changeSet>

    <changeSet id="acc_add_foreign_key_constraint_branch"
               author="---">
        <addForeignKeyConstraint baseTableName="${prefix}cam_account" baseColumnNames="branch_id"
                                 referencedTableName="${prefix}current_branch" referencedColumnNames="id"
                                 constraintName="fk_cam_account_branch_id__branch_id"/>
    </changeSet>

</databaseChangeLog>